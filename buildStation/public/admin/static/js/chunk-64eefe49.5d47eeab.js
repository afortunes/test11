(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64eefe49"],{"98b1":function(e,t,a){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:230,t=880,a=document.documentElement.clientHeight||document.body.clientHeight;return a?a-e:t-e}a.d(t,"a",(function(){return o}))},dbe5:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",[e.checkPermission(["admin/SettingWechat/offiInfo"])?a("el-tab-pane",{attrs:{label:"公众号",lazy:""}},[a("WechatOffi",{staticClass:"dialog-body",style:{height:e.height+50+"px"}})],1):e._e(),e.checkPermission(["admin/SettingWechat/miniInfo"])?a("el-tab-pane",{attrs:{label:"小程序",lazy:""}},[a("WechatMini")],1):e._e()],1)],1)},i=[],n=a("98b1"),l=a("e350"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card"},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("el-form-item",{attrs:{label:"原始ID",prop:"origin_id"}},[a("el-input",{model:{value:e.model.origin_id,callback:function(t){e.$set(e.model,"origin_id",t)},expression:"model.origin_id"}})],1),a("el-form-item",{attrs:{label:"二维码",prop:"qrcode"}},[a("el-image",{staticStyle:{height:"100px"},attrs:{shape:"circle",fit:"contain",src:e.model.qrcode_url,"preview-src-list":[e.model.qrcode_url]}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])]),a("el-upload",{attrs:{name:"file","show-file-list":!1,action:e.uploadAction,headers:e.uploadHeaders,data:e.uploadData,"on-success":e.uploadSuccess,"on-error":e.uploadError}},[a("el-button",{attrs:{size:"mini"}},[e._v("上传")])],1),a("span",[e._v("jpg、png图片，小于200KB，宽高1:1")])],1),a("el-form-item",{attrs:{label:"AppID",prop:"appid"}},[a("el-input",{model:{value:e.model.appid,callback:function(t){e.$set(e.model,"appid",t)},expression:"model.appid"}})],1),a("el-form-item",{attrs:{label:"AppSecret",prop:"appsecret"}},[a("el-input",{model:{value:e.model.appsecret,callback:function(t){e.$set(e.model,"appsecret",t)},expression:"model.appsecret"}})],1),a("el-form-item",{attrs:{label:"服务器地址(URL)",prop:"url"}},[a("el-input",{model:{value:e.model.url,callback:function(t){e.$set(e.model,"url",t)},expression:"model.url"}})],1),a("el-form-item",{attrs:{label:"令牌(Token)",prop:"token"}},[a("el-input",{model:{value:e.model.token,callback:function(t){e.$set(e.model,"token",t)},expression:"model.token"}})],1),a("el-form-item",{attrs:{label:"消息加解密密钥",prop:"encoding_aes_key"}},[a("el-input",{model:{value:e.model.encoding_aes_key,callback:function(t){e.$set(e.model,"encoding_aes_key",t)},expression:"model.encoding_aes_key"}})],1),a("el-form-item",{attrs:{label:"消息加解密方式",prop:"encoding_aes_type"}},[a("el-radio-group",{model:{value:e.model.encoding_aes_type,callback:function(t){e.$set(e.model,"encoding_aes_type",t)},expression:"model.encoding_aes_type"}},e._l(e.encoding_aes_types,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",[a("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},s=[],c=a("b775");function d(e){return Object(c["a"])({url:"/admin/SettingWechat/offiInfo",method:"get",params:e})}function u(e){return Object(c["a"])({url:"/admin/SettingWechat/offiEdit",method:"post",data:e})}function m(e){return Object(c["a"])({url:"/admin/SettingWechat/miniInfo",method:"get",params:e})}function p(e){return Object(c["a"])({url:"/admin/SettingWechat/miniEdit",method:"post",data:e})}var f=a("5f87"),g={components:{},data:function(){return{loading:!1,encoding_aes_types:[{value:1,label:"明文模式"},{value:2,label:"兼容模式"},{value:3,label:"安全模式"}],model:{name:"",origin_id:"",qrcode:"",appid:"",appsecret:"",url:"",token:"",encoding_aes_key:"",encoding_aes_type:1,qrcode_url:""},uploadAction:"/admin/SettingWechat/qrcode",uploadHeaders:{AdminToken:Object(f["d"])()},uploadData:{type:"offi"},rules:{appid:[{required:!0,message:"请输入appid",trigger:"blur"}],appsecret:[{required:!0,message:"请输入appsecret",trigger:"blur"}]}}},created:function(){this.info()},methods:{info:function(){var e=this;d().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,d().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,u(e.model).then((function(t){e.info(),e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},uploadSuccess:function(e,t){200===e.code?(this.model.qrcode_url=e.data.file_url,this.model.qrcode=e.data.file_path,this.$message.success(e.msg)):this.$message.error(e.msg)},uploadError:function(e,t){this.$message.error("上传出错")}}},h=g,b=a("4ac2"),_=Object(b["a"])(h,r,s,!1,null,null,null),v=_.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card"},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("el-form-item",{attrs:{label:"原始ID",prop:"origin_id"}},[a("el-input",{model:{value:e.model.origin_id,callback:function(t){e.$set(e.model,"origin_id",t)},expression:"model.origin_id"}})],1),a("el-form-item",{attrs:{label:"二维码",prop:"qrcode"}},[a("el-image",{staticStyle:{height:"100px"},attrs:{shape:"circle",fit:"contain",src:e.model.qrcode_url,"preview-src-list":[e.model.qrcode_url]}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])]),a("el-upload",{attrs:{name:"file","show-file-list":!1,action:e.uploadAction,headers:e.uploadHeaders,data:e.uploadData,"on-success":e.uploadSuccess,"on-error":e.uploadError}},[a("el-button",{attrs:{size:"mini"}},[e._v("上传")])],1),a("span",[e._v("jpg、png图片，小于200KB，宽高1:1")])],1),a("el-form-item",{attrs:{label:"AppID",prop:"appid"}},[a("el-input",{model:{value:e.model.appid,callback:function(t){e.$set(e.model,"appid",t)},expression:"model.appid"}})],1),a("el-form-item",{attrs:{label:"AppSecret",prop:"appsecret"}},[a("el-input",{model:{value:e.model.appsecret,callback:function(t){e.$set(e.model,"appsecret",t)},expression:"model.appsecret"}})],1),a("el-form-item",[a("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},y=[],$={components:{},data:function(){return{loading:!1,model:{name:"",origin_id:"",qrcode:"",appid:"",appsecret:"",qrcode_url:""},uploadAction:"/admin/SettingWechat/qrcode",uploadHeaders:{AdminToken:Object(f["d"])()},uploadData:{type:"mini"},rules:{appid:[{required:!0,message:"请输入appid",trigger:"blur"}],appsecret:[{required:!0,message:"请输入appsecret",trigger:"blur"}]}}},created:function(){this.info()},methods:{info:function(){var e=this;m().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,m().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,p(e.model).then((function(t){e.info(),e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},uploadSuccess:function(e,t){200===e.code?(this.model.qrcode_url=e.data.file_url,this.model.qrcode=e.data.file_path,this.$message.success(e.msg)):this.$message.error(e.msg)},uploadError:function(e,t){this.$message.error("上传出错")}}},x=$,q=Object(b["a"])(x,k,y,!1,null,null,null),S=q.exports,w={name:"Wechat",components:{WechatOffi:v,WechatMini:S},data:function(){return{height:680}},created:function(){this.height=Object(n["a"])()},methods:{checkPermission:l["a"]}},W=w,j=Object(b["a"])(W,o,i,!1,null,null,null);t["default"]=j.exports},e350:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("4318"),a("2e4f");var o=a("4360");function i(e){if(e&&e instanceof Array&&e.length>0){var t=o["a"].getters&&o["a"].getters.roles,a=e,i=t.some((function(e){return a.includes(e)}));return i}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}}}]);